@model List<EventCalendar.Entities.Event>

@{
	ViewData["Title"] = "EventList";
	Layout = "~/Views/Shared/_AdminLayout.cshtml";

	var grouped = Model.GroupBy(e => new { e.StartDate.Year, e.StartDate.Month })
		.OrderByDescending(g => g.Key.Year).ThenByDescending(g => g.Key.Month).ToList();
	string[] aylar = { "", "Ocak", "Şubat", "Mart", "Nisan", "Mayıs", "Haziran", "Temmuz", "Ağustos", "Eylül", "Ekim", "Kasım", "Aralık" };
	string[] renkler = { "#007bff", "#6610f2", "#6f42c1", "#e83e8c", "#fd7e14", "#28a745", "#20c997", "#17a2b8", "#ffc107", "#dc3545", "#343a40", "#fdc006" };
}

<link rel="stylesheet" href="~/css/site.css" />

<h2 class="gradient-text2 d-block mx-auto text-center mt-4">Etkinlikler</h2>


<div class="container my-5">
	@foreach (var group in grouped)
	{
		var color = renkler[(group.Key.Month - 1) % renkler.Length];
		<h4 class="month-heading my-4 text-center" style="color:@color;">
			🗓️ @aylar[group.Key.Month] @group.Key.Year
		</h4>

		<div class="row">
			@foreach (var ev in group)
			{
				<div class="col-md-6 col-lg-4 mb-4">
					<div class="event-box p-3 shadow-sm h-100" style="border-left:6px solid @(ev.Category?.Color ?? color);">
						<h5 class="fw-bold">@ev.Title</h5>
						<p class="text-muted mb-1">
							<i class="far fa-calendar-alt"></i>
							@ev.StartDate.ToString("dd.MM.yyyy") - @ev.EndDate.ToString("dd.MM.yyyy")
						</p>

						<div class="d-flex justify-content-between align-items-center mt-3">
							<div>
								<span class="badge px-3 py-2" style="background:@(ev.Category?.Color ?? color); color:white;">
									@ev.Category?.Name
								</span>
							</div>

							<div class="btn-group ms-3" role="group">
								@* <a href="@Url.Action("UpdateEventDate", "Event", new { id = ev.EventId })" class="btn btn-sm btn-outline-warning" title="Güncelle">
									<i class="fas fa-edit"></i>
								</a> *@
								<a href="/Event/UpdateEventDate/@ev.EventId" class="btn btn-sm btn-outline-warning"><i class="fas fa-edit"></i></a>
								<a href="/Event/DeleteEvent/@ev.EventId" class="btn btn-sm btn-outline-danger"><i class="fas fa-trash-alt"></i></a>
								@* <a href="@Url.Action("DeleteEvent", "Event", new { id = ev.EventId })" class="btn btn-sm btn-outline-danger" title="Sil">
									<i class="fas fa-trash-alt"></i>
								</a> *@
							</div>
						</div>

					</div>
				</div>
			}
		</div>
	}
</div>